from collections import Counter

file_path = 'sample.json'

# with open(file_path, 'r') as file:
#     data = json.load(file)

import requests

url = "https://quay.io/api/v1/repository/rpattnai/workbench-images/manifest/sha256:f802620c6e5aff5e1e719574b57253e07fccee101600a0b6bb96723827f379fd/security"
headers = {
    "X-Requested-With": "XMLHttpRequest",
    "Authorization": "Bearer 3PZX0UYX6FSENKQ14I1VTHUJ4KGBS8L5LHJ0W1RN7TPHFVQ4P0NR7VQNCZIFRC9B"
}

response = requests.get(url, headers=headers)
data = response.json()

vulnerabilities = []

for feature in data['data']['Layer']['Features']:
    if(len(feature['Vulnerabilities']) > 0):
        for vulnerability in feature['Vulnerabilities']:
            vulnerabilities.append(vulnerability)

severity_levels = [entry.get("Severity", "Unknown") for entry in vulnerabilities]

# Count occurrences of each severity level
severity_counts = Counter(severity_levels)

my_dictionary = {
    "image_name" : []
}

# Print the counts
for severity, count in severity_counts.items():
    print(f"{severity}: {count}")
    my_dictionary.append()
